# Unbound configuration file for Debian.
# <% if node.has_key?('chef') and node['chef'].has_key?('template_warning') -%><%= "\n##{node['chef']['template_warning']}\n#\n"%><%- end %>
# See the unbound.conf(5) man page.
#
# See /usr/share/doc/unbound/examples/unbound.conf for a commented
# reference config file.

server:
    # The following line will configure unbound to perform cryptographic
    # DNSSEC validation using the root trust anchor.
    auto-trust-anchor-file: "/var/lib/unbound/root.key"
    val-log-level: 2    

    verbosity: 1
    do-ip6: <%= @ipv6?'yes':'no' %>

<% @insecure_domains.each do |domain| -%>
    domain-insecure: "<%= domain %>"
<%- end %>
<% @stub_zones.each do |name,config| -%>

stub-zone:
    name: "<%= name %>"
    stub-addr: <%= config[:server] %>
<%- end %>
